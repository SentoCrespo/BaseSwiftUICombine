# ---------------------------------
# Mocks target
# ---------------------------------

targets:
  Mocks:

    ## Scheme
    scheme: 
      testTargets:
        - Mocks

    ## Properties
    type: framework
    platform: [iOS]
    platformSuffix: ''

    ## Sources
    sources:

      ### Target files 
      - path: Mocks
        excludes: 
          - .swiftlint.yml
          - Info.plist ### Don't link info.plist

      ### Client files linked by alias
      - path: Clients/${CLIENT}
        name: Client
        type: group
        includes:
          - CustomerDynamicConfiguration.json

    ## Settings
    settings:
      base:
        SDKROOT: iphoneos
        PRODUCT_NAME: Mocks
        INFOPLIST_FILE: $(SRCROOT)/Mocks/Info.plist
        PRODUCT_BUNDLE_IDENTIFIER: com.wunderfleet.mocks
        ENABLE_BITCODE: NO
        CLANG_ENABLE_MODULES: YES
        DEFINES_MODULE: YES
        USER_HEADER_SEARCH_PATHS: ../CarSharingSpecialisation/ExternSource
        SKIP_INSTALL: YES
      
    ## Post-build scripts phase
    preBuildScripts:
      - name: Swift Lint
        script: |
                ${SRCROOT}/scripts/codeStyle/swiftlint-0.44.0 --config Mocks/.swiftlint.yml
        basedOnDependencyAnalysis: false

    ## Dependencies
    dependencies:

      ### iOS SDKs
      - sdk: Foundation.framework
      - sdk: MapKit.framework
      - sdk: XCTest.framework
      
      ### Other targets
      - target: UseCases
      - target: PlatformPersistenceSecure
          
